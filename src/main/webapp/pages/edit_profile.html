<style type="text/css">

.close {
	position: relative;
	right: 113px;
}
</style>

<div style="background-color: #fff;padding: 10px;">
   <h3 class="topic">Edit your Profile</h3>
   <div class="detailWrapper" style="padding:15px">
      <div id="regform" class="form-signin" style="max-width: 1200px;">
         <div class="container">
            <form class="form-horizontal" id="edit_profile_form"role="form" enctype="multipart/form-data">
               <input type="hidden" id="employee_id" name="employee_id"/>
               <div class="row">
                  <div class="col-md-9 personal-info" style="background-color: #fff">
                     <br>
                     <br>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">First Name:</label>
                        <div class="col-lg-8">
                           <input type="text" class="form-control" id="edit_firstname" name="firstname" placeholder="Firstname" required="" autofocus="" />
                           <label style="display:block;color:red;" id="lbl_firstname"> &nbsp; </label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">Last Name:</label>
                        <div class="col-lg-8">
                           <input type="text" class="form-control" id="edit_lastname" name="lastname" placeholder="Lastname" required="" autofocus="" />
                           <label style="display:block;color:red;" id="lbl_lastname">&nbsp;</label>
                        </div>
                     </div>
                     <div class="form-group">
                         <label class="col-lg-3 control-label">Employee ID:</label>
                          <div class="col-lg-8">
                             <input type="text" class="form-control" id="edit_employeeId" name="employeeId" placeholder="Employee ID" required="" autofocus="" />
                             <label style="display:block;color:red;" id="lbl_employeeId">&nbsp;</label>
                          </div>
                      </div>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">Birthday:</label>
                        <div class="col-lg-8">
                           <input type="date" class="form-control" id="edit_birthDate" name="birthDate" required="" autofocus="">
                           <label style="display:block;color:red;" id="lbl_birthDate">&nbsp;</label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">Phone Number:</label>
                        <div class="col-lg-8">
                           <input type="text" class="form-control" id="edit_phone_number" name="phone_number" placeholder="Phone Number" onkeypress="return isNumber(event)" required="" autofocus="" />
                           <label style="display:block;color:red;" id="lbl_phone_number">&nbsp;</label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">Job title:</label>
                        <div class="col-lg-8">
                           <select id="edit_job_title" name="job_title" class="form-control">
                           </select> 
                           <label style="display: block; color: red;" id="lbl_job_title">&nbsp;</label>
                        </div>
                     </div>
                     <div class="form-group">
                       <label class="col-lg-3 control-label">Department:</label>
                       <div class="col-lg-8">
               				<select id="edit_department" name="department" class="form-control">
                    		</select>
               				<label style="display:block;color:red;" id="lbl_department">&nbsp;</label>
                       </div>
                      </div>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">Role:</label>
                        <div class="col-lg-8">
                           <select id="edit_role" name="role" class="form-control">
                           </select> <label style="display: block; color: red;" id="lbl_role">&nbsp;</label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-lg-3 control-label">Gender:</label>
                        <div class="col-lg-8">
                           <select name="gender" id="edit_gender" name="gender" class="form-control">
                              <option value="Male">Male</option>
                              <option value="Female">Female</option>
                           </select>
                           <label style="display:block;color:green;" id="lbl_success">&nbsp;</label>
                        </div>
                     </div>
                     <div class="form-group">
                        <label class="col-md-3 control-label"></label>
                        <div class="col-md-8">
                           <button class="btn btn-primary" type="button" onclick="save()" id="submit">Save Changes</button>
                           <span></span>
                           <input type="reset" class="btn btn-default" value="Reset">
                        </div>
                     </div>
                  </div>
                  <div class="col-md-3">
                     <div class="text-center">
                        <div class="col-md-3 col-lg-3 " align="center"> 
                           <img alt="User Pic" id="edit_profile_pic" name="file" src="images/avatar.jpg" width="250" height="250" class="img-circle">
                        </div>
                        <input type='file' class="form-control" name="file" id="upload" onchange="readURL(this);" style="height: auto;" />
                     </div>
                  </div>
               </div>
               <input type="hidden" class="form-control" id="edit_username" name="user_id" value='0'/>
                <input type="hidden" class="form-control" id="edited_emp_id" name="edited_emp_id" value='0'/>
               <input type="submit" id ="submit" value="Submit" style="display:none;"/>
            </form>
         </div>
      </div>
   </div>
</div>

 <script type="text/javascript"> 
 
 $(document).ready(function() {

 });

 function chooseFile() {
     $("#upload").click();
 }

 function readURL(input) {

     if (input.files && input.files[0]) {
         var reader = new FileReader();

         reader.onload = function(e) {
             $('#edit_profile_pic')
                 .attr('src', e.target.result)
                 .width(250)
                 .height(250);
         };

         reader.readAsDataURL(input.files[0]);
     }
     $("#close_btn").css("display", "block");
 }

 function removeImg() {
     $("#profile_pic").attr("src", "images/avatar.jpg");
     $("#close_btn").css("display", "none");

 }

 function save() {
	console.log("imhere");
/*      if ((($("#lbl_firstname").html()) === "&nbsp;") && (($("#lbl_lastname").html()) === "&nbsp;") &&
        (($("#lbl_birthDate").html()) === "&nbsp;")  && 
        (($("#lbl_phone_number").html()) === "&nbsp;") && (($("#lbl_role").html()) === "&nbsp;")) { */

         $.ajax({
             url: "employee/save/employeeDeatils",
             type: "POST",
             data:  new FormData($("#edit_profile_form")[0]),
             enctype: 'multipart/form-data',
             processData: false,
             contentType: false,
             cache: false,
             success: function() {

                 accountEdited();

             }
         });
    /*  } */
 }


 function isNumber(evt) {
     evt = (evt) ? evt : window.event;
     var charCode = (evt.which) ? evt.which : evt.keyCode;
     if (charCode > 31 && (charCode < 48 || charCode > 57)) {
         return false;
     }
     return true;
 }

 function validation() {

     var regular_exp = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
     var email_address = $('#edit_email_address').val();

     if ($("#firstname").val() == "") {
         $("#lbl_firstname").html("Please fill the Firstname");

     } else {
         $("#lbl_firstname").html("&nbsp;");

     }

     if ($("#lastname").val() == "") {
         $("#lbl_lastname").html("Please fill the Lastname");

     } else {
         $("#lbl_lastname").html("&nbsp;");

     }

     if ($("#birthDate").val() == "") {
         $("#lbl_birthDate").html("Please fill the Date of Birth");

     } else {
         $("#lbl_birthDate").html("&nbsp;");

     }
     if (regular_exp.test(email_address.toLowerCase()) === false) {
         $("#lbl_email_address").html("Please fill the Email Address");

     } else {
         $("#lbl_email_address").html("&nbsp;");

     }
     if ($("#phone_number").val() == "") {
         $("#lbl_phone_number").html("Please fill the Phone Number");

     } else {
         $("#lbl_phone_number").html("&nbsp;");

     }
     if ($("#skype_id").val() == "") {
         $("#lbl_skype_id").html("Please fill the Skype ID");

     } else {
         $("#lbl_skype_id").html("&nbsp;");

     }

 }

 function accountEdited() {
     $("#lbl_success").html("You have Edited your account");
     HideLabel();

 }

 function HideLabel() {
     var seconds = 5;
     setTimeout(function() {
         $("#lbl_success").html("&nbsp;");
     }, seconds * 1000);
 };
	
  </script>