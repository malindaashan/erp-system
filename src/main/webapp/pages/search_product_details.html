<style type="text/css">

    label {

        margin-bottom: 10px;
    }
    
    .btn-success {
    	margin-left: 15px;
	}
	
</style>

<h2 class="topic">Search Production Details</h2>
<div class="detailWrapper">
<!--       <div class="form-row">
         <div class="form-group col-md-6">
            <label>Select Line: </label>
            <select id="selected_line" name="selected_line" class="form-control">
               <option selected>-- Please Select a Line --</option>
            </select>
         </div>
      </div>
      <br>
      <div class="clearfix"></div> -->
       <div class="clearfix"></div>
      <table id="datatable" class="display" width="100%"></table>
</div>
<script>
   var colorset = ["#e3ecfc","ffcb77","#bdef28","#ff8ee4","#de91ff","#f7ff89","#89fff9","#ff8996"];
   var cellData=""
   var colorCount = colorset.length-1;
   var loopColor = colorCount;
   var dataSet = [];
   $(document).ready(function() {
       $('#datatable').DataTable({
           data: dataSet,
           columns: [{
        	   	   title: "#"
           	   },{
                   title: "Product Name"
               },
               {
                   title: "Assigned Line"
               },
               {
                   title: "Employee Name"
               },
               {
                   title: "Employee RFID"
               },
               {
                   title: "Device Code (MAC)"
               },
               {
                   title: "Line Position"
               },
               {
                   title: "Position Name"
               },
               {
                   title: "Steps Given"
               },
               {
                   title: "Time Given"
               },
               {
                   title: "Assigned Status"
               }
           ],
           "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
    
        	   if(iDisplayIndex==0){
        		   loopColor = colorCount
        		   cellData = aData[1];
        		   $('td', nRow).css('background-color', colorset[loopColor]);
        	   } else if(cellData == aData[1]){
        		   $('td', nRow).css('background-color', colorset[loopColor]);
        	   } else{
        		   loopColor = loopColor-1;
        	  	   if(loopColor == -1){
            		   loopColor = colorCount
            	   }
        		   $('td', nRow).css('background-color', colorset[loopColor]);
        		   cellData = aData[1];
        	   }
           }
       });
       
       $.ajax({
           url: 'product/list/allassigneedetails',
           dataType: 'json',
           type: 'GET',
           success: function(data) {
               loadAssigneeDetails(data);
           }
       });
  
   });
   
   function loadAssigneeDetails(data){
		for(var x=0; x<data.length; x++){
        	var tempData = [x+1,data[x].productName, data[x].line,data[x].employeeFullname,data[x].rfid,data[x].deviceCode,
        			data[x].step,data[x].stepName,data[x].sewingSteps,data[x].timeTaken,data[x].status];
        	dataSet.push(tempData);
	}
    var datatable = $("#datatable").DataTable();
    datatable.clear().rows.add(dataSet).draw();
   }

   
</script>