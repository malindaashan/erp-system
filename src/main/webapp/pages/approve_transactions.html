<style type="text/css">

    label {

        margin-bottom: 10px;
    }

</style>

<div id="approve_transactions">
  <h3 class="topic">Approve Transactions</h3>
   <div class="detailWrapper">
   <table id="datatable" class="display" width="100%"></table>
   <input type="hidden" id="sel_rec" name="sel_rec" value=""/>
   
         <!-- start of modal -->
      <div class="modal fade" style="" id="assignDetails" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog" style="left:0%">
            <div class="modal-content" style="position: absolute;margin-left: -320px; padding: 10px">
               <div class="modal-header" style="padding:10px; width: 1200px">
                  <button type="button" style="position: relative;left: 115px;" class="close" data-dismiss="modal" aria-label="Close">
                  <span style="position: relative;left: -110px;" aria-hidden="true">&times;</span>
                  </button>
                  <h1>Confirmation</h1>
               </div>
               <div class="modal-body" style="padding:1px">
                  <div id="model-details"><h3>Are you sure you want approve the file?</h3></div>
                  <button class="btn btn-primary" type="button" onclick="confirm();" id="yes">Yes</button>
                  <button class="btn btn-primary" type="button" data-dismiss="modal" id="no">NO</button>
               </div>
            </div>
         </div>
      </div>
   </div>
 </div> 
<script>
 var dataSet = [];
$(document).ready(function() {
	  $('#datatable').DataTable({
	        data: dataSet,
	        columns: [{
	     	   	   title: "#"
	        	   },
	            {
	                title: "File Name"
	            },
	            {
	                title: "File Description"
	            },
	            {
	                title: "Uploaded Date"
	            },
	            {
	                title: "File Status"
	            },
	            {
	                title: "View"
	            },
	            {
	                title: "Change Status"
	            }
	        ]
	    });
    $.ajax({
        url: 'salary/getFiles?status=P',
        dataType: 'json',
        type: 'GET',
        success: function(data) {
            //alert("Successfully loded")
            setFileData(data);
        }
    });
});

function confirm(){
	$.ajax({
	    url: 'salary/approve?id='+$("#sel_rec").val(),
	    dataType: 'json',
	    type: 'GET',
	    success: function(data) {
	        alert("Confim");
	    }
	});
	location.reload();
}

function loadtoModel(id){
	//alert(id);
	$("#sel_rec").val(id);
}
function setFileData(data) {
    dataSet = [];
    for (var i = 0; i < data.length; i++) {
        if(data[i].status == "P"){
    		dataSet.push([data[i].id, data[i].name,data[i].des,data[i].uploadedDate,data[i].status,"<a onclick=\"loadExcel(" + data[i].id + ")\">View</a>", "<a id=\"" + data[i].id + "\"onclick=\"loadtoModel(" + data[i].id + ")\" data-toggle=\"modal\" data-target=\"#assignDetails\">Approve</a>"]);
        } else {
        	dataSet.push([data[i].id, data[i].name,data[i].des,data[i].uploadedDate,data[i].status,"No Preview","Approved"]);
        }
    }
    var datatable = $("#datatable").DataTable();
    datatable.clear().rows.add(dataSet).draw();
}

   /*  var prodArr = [];
    var prodNameArr = [];
    var dataSet = [];


    $('#selected_line').on('change', function(e) {
        $.ajax({
            url: 'product/list/productname/linedetails',
            dataType: 'json',
            data: {
                product_name: $("#product_name_assign").val()
            },
            type: 'GET',
            success: function(data) {
                setLineDetails(data);
            }
        });
    });

    function setLineDetails(data) {
        dataSet = [];
        for (var i = 0; i < data.length; i++) {
            dataSet.push([data[i].stepName, data[i].step, "", "", "", "", "<a id=\"" + data[i].step + "\"onclick=\"loadtoModel(" + data[i].step + ")\" data-toggle=\"modal\" data-target=\"#assignDetails\">Assign</a>", "", "", ""]);
        }
        var datatable = $("#datatable").DataTable();
        datatable.clear().rows.add(dataSet).draw();
    }

    function loadtoModel(id) {
        for (var i = 0; i < dataSet.length; i++) {
            if (dataSet[i][1] == id) {
                $(".modal-body #step_name").val(dataSet[i][0]);
                $(".modal-body #step").val(dataSet[i][1]);
                break;
            }
        }
    }

    function saveBasicInfo() {
        $.ajax({
            url: "product/save/basicinfo",
            type: "POST",
            data: new FormData($("#basic_infoform")[0]),
            processData: false,
            contentType: false,
            cache: false,
            success: function() {

            }
        });
        alert("Product Sucessfully Saved");

    } */

</script>